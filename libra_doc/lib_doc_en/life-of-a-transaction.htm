<!DOCTYPE html>
<html lang="en">

<head>
  <meta charSet="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Life of a Transaction · Libra</title>
  <meta name="viewport" content="width=device-width" />
  <meta name="generator" content="Docusaurus" />
  <meta name="description"
    content="To get a deeper understanding of the lifecycle of a Libra transaction, we will follow a transaction on its journey from being submitted to a Libra validator to being committed to the Libra Blockchain. We will then “zoom-in” on each logical component of a validator and take a look at its interactions with other components." />
  <meta name="docsearch:language" content="en" />
  <meta property="og:title" content="Life of a Transaction · Libra" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://developers.libra.org/" />
  <meta property="og:description"
    content="To get a deeper understanding of the lifecycle of a Libra transaction, we will follow a transaction on its journey from being submitted to a Libra validator to being committed to the Libra Blockchain. We will then “zoom-in” on each logical component of a validator and take a look at its interactions with other components." />
  <meta property="og:image" content="https://developers.libra.org/img/libra.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:image" content="https://developers.libra.org/img/libra.png" />
  <link rel="shortcut icon" href="libra.ico" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
  <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Libra Blog ATOM Feed" />
  <link rel="alternate" type="application/rss+xml" href="feed.xml" title="Libra Blog RSS Feed" />
  <script type="text/javascript" src="buttons.js"></script>
  <script type="text/javascript" src="code_block_buttons.js"></script>
  <script type="text/javascript" src="cookie_banner.js"></script>
  <script type="text/javascript" src="disable_adblock.js"></script>
  <script type="text/javascript" src="segment.analytics.min.js"></script>
  <script type="text/javascript" src="segment.js"></script>
  <script type="text/javascript" src="clipboardjs.2.0.0.min.js"></script>
  <script type="text/javascript" src="forms.js"></script>
  <script src="scrollSpy.js"></script>
  <link rel="stylesheet" href="main.css" />
  <script src="codetabs.js"></script>
</head>

<body class="sideNavVisible separateOnPageNav">
  <div class="fixedHeaderContainer">
    <div class="headerWrapper wrapper">
      <header><a href="https://developers.libra.org/"><img class="logo" src="libra-nav-logo.png" alt="Libra" />
          <h2 class="headerTitleWithLogo">Libra</h2>
        </a>
        <div class="navigationWrapper navigationSlider">
          <nav class="slidingNav">
            <ul class="nav-site nav-site-internal">
              <li class=""><a href="https://violas.io/">Home</a></li>
              <li class="siteNavGroupActive"><a href="welcome-to-libra.htm" target="_self">Documentation</a></li>
              <li class=""><a href="https://community.libra.org" target="_self">Community</a></li>
              <li class=""><a href="blog_2.html" target="_self">Blog</a></li>
              <li class=""><a href="https://libra.org" target="_self">libra.org</a></li>
              <li class=""><a href="https://github.com/libra/libra" target="_self">GitHub</a></li>
              <li class=""><a href="../lib_doc_en2cn/life-of-a-transaction.htm" target="_self">中/EN</a></li>
              <li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react"
                  placeholder="Search" title="Search" /></li>
            </ul>
          </nav>
        </div>
      </header>
    </div>
  </div>
  <div class="navPusher">
    <div class="docMainWrapper wrapper">
      <div class="docsNavContainer" id="docsNav">
        <nav class="toc">
          <div class="toggleNav">
            <section class="navWrapper wrapper">
              <div class="navBreadcrumb wrapper">
                <div class="navToggle" id="navToggler">
                  <div class="hamburger-menu">
                    <div class="line1"></div>
                    <div class="line2"></div>
                    <div class="line3"></div>
                  </div>
                </div>
                <h2><i>›</i><span>Learn About Libra</span></h2>
                <div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div>
              </div>
              <div class="navGroups">
                <div class="navGroup">
                  <h3 class="navGroupCategoryTitle">Learn About Libra</h3>
                  <ul class="">
                    <li class="navListItem"><a class="navItem" href="welcome-to-libra.htm">Welcome</a></li>
                    <li class="navListItem"><a class="navItem" href="libra-protocol.htm">Libra Protocol: Key
                        Concepts</a></li>
                    <li class="navListItem navListItemActive"><a class="navItem" href="life-of-a-transaction.htm">Life
                        of a Transaction</a></li>
                    <div class="navGroup subNavGroup">
                      <h4 class="navGroupSubcategoryTitle">Technical Papers</h4>
                      <ul>
                        <li class="navListItem"><a class="navItem" href="the-libra-blockchain-paper.htm">The Libra
                            Blockchain</a></li>
                        <li class="navListItem"><a class="navItem" href="move-paper.htm">Move: A Language With
                            Programmable Resources</a></li>
                        <li class="navListItem"><a class="navItem" href="state-machine-replication-paper.htm">State
                            Machine Replication in the Libra Blockchain</a></li>
                      </ul>
                    </div>
                  </ul>
                </div>
                <div class="navGroup">
                  <h3 class="navGroupCategoryTitle">Try Libra Core</h3>
                  <ul class="">
                    <li class="navListItem"><a class="navItem" href="my-first-transaction.htm">My First Transaction</a>
                    </li>
                    <li class="navListItem"><a class="navItem" href="move-overview.htm">Getting Started With Move</a>
                    </li>
                    <li class="navListItem"><a class="navItem" href="run-local-network.htm">Run a Local Network</a></li>
                    <li class="navListItem"><a class="navItem" href="run-move-locally.htm">Run Move Programs Locally</a>
                    </li>
                  </ul>
                </div>
                <div class="navGroup">
                  <h3 class="navGroupCategoryTitle">Community</h3>
                  <ul class="">
                    <li class="navListItem"><a class="navItem" href="libra-open-source-paper.htm">Libra Open Source</a>
                    </li>
                    <li class="navListItem"><a class="navItem" href="contributing.htm">Contribution Guide</a></li>
                    <li class="navListItem"><a class="navItem" href="coding-guidelines.htm">Coding Guidelines</a></li>
                    <li class="navListItem"><a class="navItem" href="security.htm">Reporting Vulnerabilities</a></li>
                  </ul>
                </div>
                <div class="navGroup">
                  <h3 class="navGroupCategoryTitle">Libra Codebase</h3>
                  <ul class="">
                    <li class="navListItem"><a class="navItem" href="libra-core-overview.htm">Libra Core Overview</a>
                    </li>
                    <div class="navGroup subNavGroup">
                      <h4 class="navGroupSubcategoryTitle">READMEs</h4>
                      <ul>
                        <li class="navListItem"><a class="navItem" href="admission-control.htm">Admission Control</a>
                        </li>
                        <li class="navListItem"><a class="navItem" href="bytecode-verifier.htm">Bytecode Verifier</a>
                        </li>
                        <li class="navListItem"><a class="navItem" href="consensus.htm">Consensus</a></li>
                        <li class="navListItem"><a class="navItem" href="crypto.htm">Crypto</a></li>
                        <li class="navListItem"><a class="navItem" href="execution.htm">Execution</a></li>
                        <li class="navListItem"><a class="navItem" href="mempool.htm">Mempool</a></li>
                        <li class="navListItem"><a class="navItem" href="ir-to-bytecode.htm">Move IR Compiler</a></li>
                        <li class="navListItem"><a class="navItem" href="move-language.htm">Move Language</a></li>
                        <li class="navListItem"><a class="navItem" href="network.htm">Network</a></li>
                        <li class="navListItem"><a class="navItem" href="storage.htm">Storage</a></li>
                        <li class="navListItem"><a class="navItem" href="vm.htm">Virtual Machine</a></li>
                      </ul>
                    </div>
                  </ul>
                </div>
                <div class="navGroup">
                  <h3 class="navGroupCategoryTitle">Reference</h3>
                  <ul class="">
                    <li class="navListItem"><a class="navItem" href="libra-cli.htm">Libra CLI</a></li>
                    <li class="navListItem"><a class="navItem" href="glossary.htm">Glossary</a></li>
                  </ul>
                </div>
              </div>
            </section>
          </div>
          <script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory) {
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')) {
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function () {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function () {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function (event) {
                var el = event.target;
                while (el !== headings) {
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else {
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function (event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
          </script>
        </nav>
      </div>
      <div class="container mainContainer">
        <div class="wrapper">
          <div class="post">
            <header class="postHeader"><a class="edit-page-link button"
                href="https://github.com/libra/website/edit/master/docs/life-of-a-transaction.md" target="_blank"
                rel="noreferrer noopener">Edit</a>
              <h1 class="postHeaderTitle">Life of a Transaction</h1>
            </header>
            <article>
              <div><span>
                  <p>To get a deeper understanding of the lifecycle of a Libra transaction, we will follow a transaction
                    on its journey from being submitted to a Libra validator to being committed to the Libra Blockchain.
                    We will then “zoom-in” on each logical component of a validator and take a look at its interactions
                    with other components.</p>
                  <h2><a class="anchor" aria-hidden="true" id="client-submits-a-transaction"></a><a
                      href="life-of-a-transaction.htm#client-submits-a-transaction" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Client Submits a Transaction</h2>
                  <p>A Libra <strong>client constructs a raw transaction</strong> (let us call it T<sub>5</sub>raw) to
                    transfer 10 LBR from Alice’s account to Bob’s account. The raw transaction includes the following
                    fields. Each field is linked to its glossary definition.</p>
                  <ul>
                    <li>Alice's <a href="glossary.htm#account-address">account address</a>.</li>
                    <li>A program that indicates the actions to be performed on Alice's behalf. It contains:
                      <ul>
                        <li>A Move bytecode <a href="glossary.htm#transaction-script">peer-to-peer transaction
                            script</a>.</li>
                        <li>A list of inputs to the script (for this example, Bob's account address and the amount of
                          payment).</li>
                      </ul>
                    </li>
                    <li><a href="glossary.htm#gas-price">Gas price</a> (in microlibra/gas units) — The amount Alice is
                      willing to pay per unit of gas, to execute the transaction. Gas is a way to pay for computation
                      and storage. A gas unit is an abstract measurement of computation with no inherent real-world
                      value.</li>
                    <li><a href="glossary.htm#maximum-gas-amount">Maximum gas amount</a> Alice is willing to pay for
                      this transaction.</li>
                    <li><a href="glossary.htm#expiration-time">Expiration time</a> of the transaction.</li>
                    <li><a href="glossary.htm#sequence-number">Sequence number</a> — 5
                      <ul>
                        <li>A transaction with sequence number 5 can only be applied to an account with sequence number
                          5.</li>
                      </ul>
                    </li>
                  </ul>
                  <p>The <strong>client signs transaction</strong> T<sub>5</sub>raw with Alice's private key. The signed
                    transaction T<sub>5</sub> includes the following:</p>
                  <ul>
                    <li>The raw transaction.</li>
                    <li>Alice's public key.</li>
                    <li>Alice's signature.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="assumptions"></a><a
                      href="life-of-a-transaction.htm#assumptions" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Assumptions</h3>
                  <p>To describe the lifecycle of transaction T<sub>5</sub>, we will assume that:</p>
                  <ul>
                    <li>Alice and Bob have <a href="glossary.htm#accounts">accounts</a> on the Libra Blockchain.</li>
                    <li>Alice's account has 110 LBR.</li>
                    <li>The current <a href="glossary.htm#sequence-number">sequence number</a> of Alice's account is 5
                      (which indicates that 5 transactions have already been sent from Alice's account).</li>
                    <li>There are a total of 100 validators — V<sub>1</sub> to V<sub>100</sub> on the network.</li>
                    <li>The client submits transaction T<sub>5</sub> to validator V<sub>1</sub></li>
                    <li><strong>Validator V<sub>1</sub> is a proposer/leader for the current round.</strong></li>
                  </ul>
                  <h2><a class="anchor" aria-hidden="true" id="lifecycle-of-the-transaction"></a><a
                      href="life-of-a-transaction.htm#lifecycle-of-the-transaction" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Lifecycle of the Transaction</h2>
                  <p>In this section, we will describe the lifecycle of transaction T<sub>5</sub>, from being submitted
                    by the client to being committed to the Libra Blockchain.</p>
                  <p>Where relevant, and following a numbered step in the lifecycle, we have provided a link to the
                    corresponding inter-component interactions of the validator node. After you are familiar with all
                    the steps in the lifecycle of the transaction, you may want to refer to the information on the
                    corresponding inter-component interactions for each step.</p>
                  <blockquote class="block_note">
                    <p><strong>Note:</strong> The arrows in all the graphics in this document originate on the component
                      initiating an interaction/action and terminate on the component on which the action is being
                      performed. The arrows <strong>do not represent</strong> data read, written, or returned.</p>
                  </blockquote>
                  <p><img src="validator-sequence.svg" alt="Figure 1.1 Lifecycle of a Transaction">
                    <small class="figure">Figure 1.1 Lifecycle of a Transaction</small></p>
                  <h3><a class="anchor" aria-hidden="true" id="accepting-the-transaction"></a><a
                      href="life-of-a-transaction.htm#accepting-the-transaction" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Accepting the Transaction</h3>
                  <p><strong>1</strong> — The client submits transaction T<sub>5</sub> to validator V<sub>1</sub> whose
                    admission control (AC) component receives the transaction. (Client → AC <a
                      href="life-of-a-transaction.htm#client-ac-ac1">AC.1</a>)</p>
                  <p><strong>2</strong> — AC will use the virtual machine (VM) component to perform validation checks,
                    such as signature verification, checking that Alice's account has sufficient balance, checking that
                    transaction T<sub>5</sub> is not being replayed, etc. (AC → VM <a
                      href="life-of-a-transaction.htm#ac-vm-ac2">AC.2</a>, <a
                      href="life-of-a-transaction.htm#ac-vm-vm1">VM.1</a>)</p>
                  <p><strong>3</strong> — When T<sub>5</sub> passes the validation checks, AC sends T<sub>5</sub> to
                    V<sub>1</sub>'s mempool. (AC → Mempool <a href="life-of-a-transaction.htm#ac-mempool-ac3">AC.3</a>,
                    <a href="life-of-a-transaction.htm#ac-mempool-mp1">MP.1</a>)</p>
                  <h3><a class="anchor" aria-hidden="true" id="sharing-the-transaction-with-other-validators"></a><a
                      href="life-of-a-transaction.htm#sharing-the-transaction-with-other-validators" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Sharing the Transaction With Other Validators</h3>
                  <p><strong>4</strong> — The mempool will hold T<sub>5</sub> in an in-memory buffer. Mempool may
                    already contain multiple transactions sent from Alice's address.</p>
                  <p><strong>5</strong> — Using the shared-mempool protocol, V<sub>1</sub> will share the transactions
                    (including T<sub>5</sub>) in its mempool with other validators (V<sub>2</sub> to V<sub>100</sub>)
                    and place transactions received from the other validators into its own mempool. (Mempool → Other
                    Validators <a href="life-of-a-transaction.htm#mempool-other-validators-mp2">MP.2</a>)</p>
                  <h3><a class="anchor" aria-hidden="true" id="proposing-the-block"></a><a
                      href="life-of-a-transaction.htm#proposing-the-block" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Proposing the Block</h3>
                  <p><strong>6</strong> — As validator V<sub>1</sub> is a proposer/leader, it will pull a block of
                    transactions from its mempool and replicate this block as a proposal to other validators via its
                    consensus component. (Consensus → Mempool <a
                      href="life-of-a-transaction.htm#consensus-mempool-mp3">MP.3</a>, <a
                      href="life-of-a-transaction.htm#consensus-mempool-co1">CO.1</a>)</p>
                  <p><strong>7</strong> — The consensus component of V<sub>1</sub> is responsible for coordinating
                    agreement among all validators on the order of transactions in the proposed block. (Consensus →
                    Other Validators <a href="life-of-a-transaction.htm#consensus-other-validators-co2">CO.2</a>). Refer
                    to our technical paper <a href="state-machine-replication-paper.htm">State Machine Replication in
                      the Libra Blockchain</a> for details of our proposed consensus protocol LibraBFT.</p>
                  <h3><a class="anchor" aria-hidden="true" id="executing-the-block-and-reaching-consensus"></a><a
                      href="life-of-a-transaction.htm#executing-the-block-and-reaching-consensus" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Executing the Block and Reaching Consensus</h3>
                  <p><strong>8</strong> — As part of reaching agreement, the block of transactions (containing
                    T<sub>5</sub>) is passed to the execution component. (Consensus → Execution <a
                      href="life-of-a-transaction.htm#consensus-execution-consensus-other-validators-co3">CO.3</a>, <a
                      href="life-of-a-transaction.htm#consensus-execution-ex1">EX.1</a>)</p>
                  <p><strong>9</strong> — The execution component manages the execution of transactions in the virtual
                    machine (VM). Note that this execution happens speculatively before the transactions in the block
                    have been agreed upon. (Execution → VM <a
                      href="life-of-a-transaction.htm#execution-vm-ex2">EX.2</a>, <a
                      href="life-of-a-transaction.htm#execution-vm-vm3">VM.3</a>)</p>
                  <p><strong>10</strong> — After executing the transactions in the block, the execution component
                    appends the transactions in the block (including T<sub>5</sub>) to the <a
                      href="life-of-a-transaction.htm#merkle-accumulators">Merkle accumulator</a> (of the ledger
                    history). This is an in-memory/temporary version of the Merkle accumulator. The
                    (proposed/speculative) result of executing these transactions is returned to the consensus
                    component. (Consensus → Execution <a
                      href="life-of-a-transaction.htm#consensus-execution-consensus-other-validators-co3">CO.3</a>, <a
                      href="life-of-a-transaction.htm#consensus-execution-ex1">EX.1</a>). The arrow from
                    &quot;consensus&quot; to &quot;execution&quot; indicates that the request to execute transactions
                    was made by the consensus component. (For consistent use of arrows across this document, we are not
                    using arrows to represent the flow of data).</p>
                  <p><strong>11</strong> — V<sub>1</sub> (the consensus leader) attempts to reach consensus on the
                    block's execution result with other validators participating in the consensus. (Consensus → Other
                    Validators <a
                      href="life-of-a-transaction.htm#consensus-execution-consensus-other-validators-co3">CO.3</a>)</p>
                  <h3><a class="anchor" aria-hidden="true" id="committing-the-block"></a><a
                      href="life-of-a-transaction.htm#committing-the-block" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Committing the Block</h3>
                  <p><strong>12</strong> — If the block's execution result is agreed upon and signed by a set of
                    validators that have the super-majority of votes, validator V<sub>1</sub>'s execution component
                    reads the result of the block execution from the speculative execution cache and commits all the
                    transactions in the block to persistent storage. (Consensus → Execution <a
                      href="life-of-a-transaction.htm#consensus-execution-co4">CO.4</a>, <a
                      href="life-of-a-transaction.htm#consensus-execution-ex3">EX.3</a>), (Execution → Storage <a
                      href="life-of-a-transaction.htm#execution-storage-ex4">EX.4</a>, <a
                      href="life-of-a-transaction.htm#execution-storage-st3">ST.3</a>)</p>
                  <p><strong>13</strong> — Alice's account will now have 100 LBR, and its sequence number will be 6. If
                    T<sub>5</sub> is replayed by Bob, it will be rejected as the sequence number of Alice's account (6)
                    is greater than the sequence number of the replayed transaction (5).</p>
                  <h2><a class="anchor" aria-hidden="true" id="validator-component-interactions"></a><a
                      href="life-of-a-transaction.htm#validator-component-interactions" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Validator Component Interactions</h2>
                  <p>In the <a href="life-of-a-transaction.htm#lifecycle-of-the-transaction">previous section</a>, we
                    described the typical lifecycle of a sample transaction from being submitted to being committed to
                    the blockchain's distributed database. Now let's look in more depth at the inter-component
                    interactions of a validator as the validator processes transactions and responds to queries. This
                    information will be most useful to those who:</p>
                  <ul>
                    <li>Would like to get an overall idea of how the system works under the covers.</li>
                    <li>Are interested in eventually contributing to the Libra Core software.</li>
                  </ul>
                  <p>For our narrative, we will assume that a client submits a transaction T<sub>N</sub> to a validator
                    V<sub>X</sub>. For each validator component, we will describe each of its inter-component
                    interactions in subsections under the respective component's section. Note that subsections
                    describing the inter-component interactions are not listed strictly in the order in which they are
                    performed. Most of the interactions are relevant to the processing of a transaction, and a few are
                    relevant to read queries by the client (queries for existing information on the blockchain).</p>
                  <p>Let us look at the core logical components of a validator node:</p>
                  <ul>
                    <li><a href="life-of-a-transaction.htm#admission-control-ac">Admission Control</a></li>
                    <li><a href="life-of-a-transaction.htm#mempool">Mempool</a></li>
                    <li><a href="life-of-a-transaction.htm#consensus">Consensus</a></li>
                    <li><a href="life-of-a-transaction.htm#execution">Execution</a></li>
                    <li><a href="life-of-a-transaction.htm#virtual-machine-vm">Virtual Machine</a></li>
                    <li><a href="life-of-a-transaction.htm#storage">Storage</a></li>
                  </ul>
                  <p>At the end of each section, we provide the link to the corresponding &quot;README&quot; of <a
                      href="libra-core-overview.htm">Libra Core</a>.</p>
                  <h2><a class="anchor" aria-hidden="true" id="admission-control-ac"></a><a
                      href="life-of-a-transaction.htm#admission-control-ac" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Admission Control (AC)</h2>
                  <p><img src="admission-control.svg" alt="Figure 1.2 Admission Control">
                    <small class="figure">Figure 1.2 Admission Control</small></p>
                  <p>Admission Control is the <em>sole external interface</em> of the validator. Any request made by a
                    client to the validator goes to AC first.</p>
                  <h3><a class="anchor" aria-hidden="true" id="client-ac-ac1"></a><a
                      href="life-of-a-transaction.htm#client-ac-ac1" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Client → AC (AC.1)</h3>
                  <p>A client submits a transaction to the admission control of a validator V<sub>X</sub>. This is done
                    via:
                    <code>AC::SubmitTransaction()</code>.</p>
                  <h3><a class="anchor" aria-hidden="true" id="ac-vm-ac2"></a><a
                      href="life-of-a-transaction.htm#ac-vm-ac2" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>AC → VM (AC.2)</h3>
                  <p>Admission control accesses the virtual machine (VM) of the validator to perform preliminary checks
                    on the transaction in order to reject malformed transactions early. This is done via:
                    <a href="life-of-a-transaction.htm#virtual-machine-b"><code>VM::ValidateTransaction()</code></a>.
                  </p>
                  <h3><a class="anchor" aria-hidden="true" id="ac-mempool-ac3"></a><a
                      href="life-of-a-transaction.htm#ac-mempool-ac3" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>AC → Mempool (AC.3)</h3>
                  <p>Once <code>VM::ValidateTransaction()</code> returns without errors, AC forwards the transaction to
                    validator V<sub>X</sub>'s mempool via <code>Mempool::AddTransactionWithValidation().</code> The
                    mempool for validator V<sub>X</sub> will accept the transaction T<sub>N</sub> from the AC only if
                    the sequence number of T<sub>N</sub> is greater than or equal to the current sequence number of the
                    sender's account (note that the transaction will not be passed to consensus until it is the next
                    sequence number).</p>
                  <h3><a class="anchor" aria-hidden="true" id="ac-storage-ac4"></a><a
                      href="life-of-a-transaction.htm#ac-storage-ac4" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>AC → Storage (AC.4)</h3>
                  <p>When the client performs a read query on the Libra Blockchain (for example, to get the balance of
                    Alice's account), AC interacts with the storage component directly to obtain the requested
                    information.</p>
                  <h3><a class="anchor" aria-hidden="true" id="admission-control-readme"></a><a
                      href="life-of-a-transaction.htm#admission-control-readme" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Admission Control README</h3>
                  <p>For implementation details refer to the <a href="admission-control.htm">Admission Control
                      README</a>.</p>
                  <h2><a class="anchor" aria-hidden="true" id="virtual-machine-vm"></a><a
                      href="life-of-a-transaction.htm#virtual-machine-vm" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Virtual Machine (VM)</h2>
                  <p><img src="virtual-machine.svg" alt="Figure 1.3 Virtual Machine">
                    <small class="figure">Figure 1.3 Virtual Machine</small></p>
                  <p>The <a href="move-overview.htm">Move virtual machine</a> (VM) verifies and executes transaction
                    scripts written in Move bytecode.</p>
                  <h3><a class="anchor" aria-hidden="true" id="ac-vm-vm1"></a><a
                      href="life-of-a-transaction.htm#ac-vm-vm1" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>AC → VM (VM.1)</h3>
                  <p>When admission control of validator V<sub>X</sub> receives a transaction from a client, it invokes
                    <code>VM::ValidateTransaction()</code> on the VM to validate the transaction.</p>
                  <h3><a class="anchor" aria-hidden="true" id="vm-storage-vm2"></a><a
                      href="life-of-a-transaction.htm#vm-storage-vm2" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>VM → Storage (VM.2)</h3>
                  <p>When AC or mempool request the VM to validate a transaction via
                    <code>VM::ValidateTransaction()</code>, the VM loads the transaction sender's account from storage
                    and performs the following verifications:</p>
                  <ul>
                    <li>Checks that the input signature on the signed transaction is correct (to reject incorrectly
                      signed transactions).</li>
                    <li>Checks that the sender's account authentication key is the same as the hash of the public key
                      (corresponding to the private key used to sign the transaction).</li>
                    <li>Verifies that the sequence number for the transaction is not less than the current sequence
                      number for the sender's account. Doing this check prevents the replay of the same transaction
                      against the sender's account.</li>
                    <li>Verifies that the program in the signed transaction is not malformed, as a malformed program
                      cannot be executed by the VM.</li>
                    <li>Verifies that there is sufficient balance in the sender's account to support the max gas amount
                      specified in the transaction, which ensures that the transaction can pay for the resources it
                      uses.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="execution-vm-vm3"></a><a
                      href="life-of-a-transaction.htm#execution-vm-vm3" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Execution → VM (VM.3)</h3>
                  <p>The execution component utilizes the VM to execute a transaction via
                    <code>VM::ExecuteTransaction()</code>.</p>
                  <p>It is important to understand that executing a transaction is different from updating the state of
                    the ledger and persisting the results in storage. A transaction T<sub>N</sub> is first executed as
                    part of an attempt to reach agreement on blocks during consensus. If agreement is reached with the
                    other validators on the ordering of transactions and their execution results, the results are
                    persisted in storage and the state of the ledger is updated.</p>
                  <h3><a class="anchor" aria-hidden="true" id="mempool-vm-vm4"></a><a
                      href="life-of-a-transaction.htm#mempool-vm-vm4" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Mempool → VM (VM.4)</h3>
                  <p>When mempool receives a transaction from other validators via shared mempool, mempool invokes <a
                      href="life-of-a-transaction.htm#action-b-1"><code>VM::ValidateTransaction()</code></a> on the VM
                    to validate the transaction.</p>
                  <h3><a class="anchor" aria-hidden="true" id="vm-readme"></a><a
                      href="life-of-a-transaction.htm#vm-readme" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>VM README</h3>
                  <p>For implementation details refer to the <a href="vm.htm">Virtual Machine README</a>.</p>
                  <h2><a class="anchor" aria-hidden="true" id="mempool"></a><a href="life-of-a-transaction.htm#mempool"
                      aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16"
                        version="1.1" viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Mempool</h2>
                  <p><img src="mempool.svg" alt="Figure 1.4 Mempool">
                    <small class="figure">Figure 1.4 Mempool</small></p>
                  <p>Mempool is a shared buffer that holds the transactions that are “waiting” to be executed. When a
                    new transaction is added to the mempool, the mempool shares this transaction with other validators
                    in the system. To reduce network consumption in the “shared mempool,” each validator is responsible
                    for delivering its own transactions to other validators. When a validator receives a transaction
                    from the mempool of another validator, the transaction is added to the mempool of the recipient
                    validator.</p>
                  <h3><a class="anchor" aria-hidden="true" id="ac-mempool-mp1"></a><a
                      href="life-of-a-transaction.htm#ac-mempool-mp1" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>AC → Mempool (MP.1)</h3>
                  <ul>
                    <li>After performing initial validation checks, a validator's AC sends the transaction to the
                      validator’s mempool.</li>
                    <li>The mempool for validator V<sub>X</sub> accepts transaction T<sub>N</sub> for the sender's
                      account only if the sequence number of T<sub>N</sub> is greater than or equal to the current
                      sequence number of the sender's account.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="mempool-other-validators-mp2"></a><a
                      href="life-of-a-transaction.htm#mempool-other-validators-mp2" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Mempool → Other Validators (MP.2)</h3>
                  <ul>
                    <li>The mempool of validator V<sub>X</sub> shares transaction T<sub>N</sub> with the other
                      validators on the same network.</li>
                    <li>Other validators share the transactions in their mempool with V<sub>X</sub>’s mempool.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="consensus-mempool-mp3"></a><a
                      href="life-of-a-transaction.htm#consensus-mempool-mp3" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus → Mempool (MP.3)</h3>
                  <ul>
                    <li>When validator V<sub>X</sub> becomes the leader, its consensus will pull a block of transactions
                      from its mempool and replicate the block to other validators. It does this to arrive at a
                      consensus on the ordering of transactions and the execution results of the transactions in the
                      block.</li>
                    <li>Note that just because a transaction T<sub>N</sub> was included in a consensus block, it does
                      not guarantee that T<sub>N</sub> will eventually be persisted in the distributed database of the
                      blockchain.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="mempool-vm-mp4"></a><a
                      href="life-of-a-transaction.htm#mempool-vm-mp4" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Mempool → VM (MP.4)</h3>
                  <p>When mempool receives a transaction from other validators, mempool invokes <a
                      href="life-of-a-transaction.htm#action-b-1"><code>VM::ValidateTransaction()</code></a> on the VM
                    to validate the transaction.</p>
                  <h3><a class="anchor" aria-hidden="true" id="mempool-readme"></a><a
                      href="life-of-a-transaction.htm#mempool-readme" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Mempool README</h3>
                  <p>For implementation details refer to the <a href="mempool.htm">Mempool README</a>.</p>
                  <h2><a class="anchor" aria-hidden="true" id="consensus"></a><a
                      href="life-of-a-transaction.htm#consensus" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus</h2>
                  <p><img src="consensus.svg" alt="Figure 1.5 Consensus">
                    <small class="figure">Figure 1.5 Consensus</small></p>
                  <p>The consensus component is responsible for ordering blocks of transactions and agreeing on the
                    results of execution by participating in the <a
                      href="life-of-a-transaction.htm#consensus-protocol">consensus protocol</a> with other validators
                    in the network.</p>
                  <h3><a class="anchor" aria-hidden="true" id="consensus-mempool-co1"></a><a
                      href="life-of-a-transaction.htm#consensus-mempool-co1" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus → Mempool (CO.1)</h3>
                  <p>When validator V<sub>X</sub> is a leader/proposer, the consensus of V<sub>X</sub> pulls a block of
                    transactions from its mempool via: <code>Mempool::GetBlock()</code>, and forms a proposal.</p>
                  <h3><a class="anchor" aria-hidden="true" id="consensus-other-validators-co2"></a><a
                      href="life-of-a-transaction.htm#consensus-other-validators-co2" aria-hidden="true"
                      class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1"
                        viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus → Other Validators (CO.2)</h3>
                  <p>If V<sub>X</sub> is a proposer/leader, its consensus replicates the proposed block of transactions
                    to other validators.</p>
                  <h3><a class="anchor" aria-hidden="true"
                      id="consensus-execution-consensus-other-validators-co3"></a><a
                      href="life-of-a-transaction.htm#consensus-execution-consensus-other-validators-co3"
                      aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16"
                        version="1.1" viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus → Execution, Consensus → Other Validators (CO.3)</h3>
                  <ul>
                    <li>To execute a block of transactions, consensus interacts with the execution component. Consensus
                      executes a block of transactions via <code>Execution:ExecuteBlock()</code> (Refer to <a
                        href="life-of-a-transaction.htm#consensus-execution-ex1">Consensus → Execution</a>)</li>
                    <li>After executing the transactions in the block, execution responds to consensus with the result
                      of executing these transactions.</li>
                    <li>Consensus signs the execution results and attempts to reach agreement on this result with other
                      validators participating in consensus.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="consensus-execution-co4"></a><a
                      href="life-of-a-transaction.htm#consensus-execution-co4" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus → Execution (CO.4)</h3>
                  <p>If enough validators vote for the same execution result, the consensus component of V<sub>X</sub>
                    informs execution via <code>Execution::CommitBlock()</code> that this block is ready to be
                    committed.</p>
                  <h3><a class="anchor" aria-hidden="true" id="consensus-readme"></a><a
                      href="life-of-a-transaction.htm#consensus-readme" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus README</h3>
                  <p>For implementation details refer to the <a href="consensus.htm">Consensus README</a>.</p>
                  <h2><a class="anchor" aria-hidden="true" id="execution"></a><a
                      href="life-of-a-transaction.htm#execution" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Execution</h2>
                  <p><img src="execution.svg" alt="Figure 1.6 Execution">
                    <small class="figure">Figure 1.6 Execution</small></p>
                  <p>Execution's job is to coordinate the execution of a block of transactions and maintain a transient
                    state that can be voted upon by consensus.</p>
                  <h3><a class="anchor" aria-hidden="true" id="consensus-execution-ex1"></a><a
                      href="life-of-a-transaction.htm#consensus-execution-ex1" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus → Execution (EX.1)</h3>
                  <ul>
                    <li>Consensus requests execution to execute a block of transactions via:
                      <code>Execution::ExecuteBlock()</code>.</li>
                    <li>Execution maintains a “scratchpad,” which holds in-memory copies of the relevant portions of the
                      <a href="life-of-a-transaction.htm#merkle-accumulators">Merkle accumulators</a>. This information
                      is used to calculate the root hash of the current state of the blockchain.</li>
                    <li>The root hash of the current state is combined with the information about the transactions in
                      the block to determine the new root hash of the accumulator. This is done prior to persisting any
                      data, and to ensure that no state or transaction is stored until agreement is reached by a quorum
                      of validators.</li>
                    <li>Execution computes the speculative root hash and then consensus of V<sub>X</sub> signs this root
                      hash and attempts to reach agreement on this root hash with other validators.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="execution-vm-ex2"></a><a
                      href="life-of-a-transaction.htm#execution-vm-ex2" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Execution → VM (EX.2)</h3>
                  <p>When consensus requests execution to execute a block of transactions via
                    <code>Execution::ExecuteBlock()</code>, execution uses the VM to determine the results of executing
                    the block of transactions.</p>
                  <h3><a class="anchor" aria-hidden="true" id="consensus-execution-ex3"></a><a
                      href="life-of-a-transaction.htm#consensus-execution-ex3" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Consensus → Execution (EX.3)</h3>
                  <p>If a quorum of validators agrees on the block execution results, consensus of each validator
                    informs its execution component via <code>Execution::CommitBlock()</code> that this block is ready
                    to be committed. This call to the execution component will include the signatures of the agreeing
                    validators to provide proof of their agreement.</p>
                  <h3><a class="anchor" aria-hidden="true" id="execution-storage-ex4"></a><a
                      href="life-of-a-transaction.htm#execution-storage-ex4" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Execution → Storage (EX.4)</h3>
                  <p>Execution takes the values from its “scratchpad” and sends them to storage for persistence via
                    <code>Storage::SaveTransactions()</code>. Execution then prunes the old values from the “scratchpad”
                    that are no longer needed (for example, parallel blocks that cannot be committed).</p>
                  <h3><a class="anchor" aria-hidden="true" id="execution-readme"></a><a
                      href="life-of-a-transaction.htm#execution-readme" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Execution README</h3>
                  <p>For implementation details refer to the <a href="execution.htm">Execution README</a>.</p>
                  <h2><a class="anchor" aria-hidden="true" id="storage"></a><a href="life-of-a-transaction.htm#storage"
                      aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16"
                        version="1.1" viewBox="0 0 16 16" width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Storage</h2>
                  <p><img src="storage.svg" alt="Figure 1.7 Storage">
                    <small class="figure">Figure 1.7 Storage</small></p>
                  <p>The storage component persists agreed upon blocks of transactions and their execution results. A
                    block/set of transactions (which includes transaction T<sub>N</sub>) will be saved via storage when:
                  </p>
                  <ul>
                    <li>There is agreement between more than 2f+1 of the validators participating in consensus on all of
                      the following:
                      <ul>
                        <li>The transactions to include in a block.</li>
                        <li>The order of the transactions.</li>
                        <li>The execution results of the transactions to be included in the block.</li>
                      </ul>
                    </li>
                  </ul>
                  <p>Refer to <a href="glossary.htm#merkle-accumulators">Merkle accumulators</a> for information on how
                    a transaction is appended to the data structure representing the blockchain.</p>
                  <h3><a class="anchor" aria-hidden="true" id="vm-storage-st1"></a><a
                      href="life-of-a-transaction.htm#vm-storage-st1" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>VM → Storage (ST.1)</h3>
                  <p>When AC or mempool invoke <code>VM::ValidateTransaction()</code> to validate a transaction,
                    <code>VM::ValidateTransaction()</code> loads the sender's account from storage and performs the
                    read-only validity checks on the transaction.</p>
                  <h3><a class="anchor" aria-hidden="true" id="execution-storage-st2"></a><a
                      href="life-of-a-transaction.htm#execution-storage-st2" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Execution → Storage (ST.2)</h3>
                  <p>When consensus calls <code>Execution::ExecuteBlock()</code>, execution reads the current state from
                    storage combined with the in-memory “scratchpad” data to determine the execution results.</p>
                  <h3><a class="anchor" aria-hidden="true" id="execution-storage-st3"></a><a
                      href="life-of-a-transaction.htm#execution-storage-st3" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Execution → Storage (ST.3)</h3>
                  <ul>
                    <li>Once consensus is reached on a block of transactions, execution calls storage via
                      <code>Storage::SaveTransactions()</code> to save the block of transactions and permanently record
                      them. This will also store the signatures from the validator nodes who agreed on this block of
                      transactions.</li>
                    <li>The in-memory data in “scratchpad” for this block is passed to updated storage and persist the
                      transactions.</li>
                    <li>When the storage is updated, the sequence numbers of all resources modified by each transaction
                      are updated accordingly.</li>
                    <li>Note: The sequence number of an account on the Libra Blockchain increments by one for each
                      committed transaction originating from that account.</li>
                  </ul>
                  <h3><a class="anchor" aria-hidden="true" id="ac-storage-st4"></a><a
                      href="life-of-a-transaction.htm#ac-storage-st4" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>AC → Storage (ST.4)</h3>
                  <p>For client queries that read information from the blockchain, AC directly interacts with storage to
                    read the requested information.</p>
                  <h3><a class="anchor" aria-hidden="true" id="storage-readme"></a><a
                      href="life-of-a-transaction.htm#storage-readme" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Storage README</h3>
                  <p>For implementation details refer to the <a href="storage.htm">Storage README</a>.</p>
                  <h2><a class="anchor" aria-hidden="true" id="reference"></a><a
                      href="life-of-a-transaction.htm#reference" aria-hidden="true" class="hash-link"><svg
                        class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16"
                        width="16">
                        <path fill-rule="evenodd"
                          d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z">
                        </path>
                      </svg></a>Reference</h2>
                  <ul>
                    <li><a href="welcome-to-libra.htm">Welcome page</a>.</li>
                    <li><a href="libra-protocol.htm">Libra Protocol: Key Concepts</a> — Introduces you to the
                      fundamental concepts of the Libra protocol.</li>
                    <li><a href="my-first-transaction.htm">My First Transaction</a> — Guides you through executing your
                      very first transaction on the Libra Blockchain using the Libra CLI client.</li>
                    <li><a href="move-overview.htm">Getting Started With Move</a> — Introduces you to a new blockchain
                      programming language called Move.</li>
                    <li><a href="libra-core-overview.htm">Libra Core Overview</a> — Provides the concept and
                      implementation details of the Libra Core components through READMEs.</li>
                    <li><a href="libra-cli.htm">CLI Guide</a> — Lists the commands (and their usage) of the Libra CLI
                      client.</li>
                    <li><a href="glossary.htm">Libra Glossary</a> — Provides a quick reference to Libra terminology.
                    </li>
                    <li><a href="state-machine-replication-paper.htm">State Machine Replication in the Libra
                        Blockchain</a> — Provides a detailed look into our consensus protocol <strong>LibraBFT</strong>.
                    </li>
                  </ul>
                </span></div>
            </article>
          </div>
          <div class="docs-prevnext"><a class="docs-prev button" href="libra-protocol.htm"><span class="arrow-prev">←
              </span><span>Libra Protocol: Key Concepts</span></a><a class="docs-next button"
              href="the-libra-blockchain-paper.htm"><span>The Libra Blockchain</span><span class="arrow-next">
                →</span></a></div>
        </div>
      </div>
      <nav class="onPageNav">
        <ul class="toc-headings">
          <li><a href="life-of-a-transaction.htm#client-submits-a-transaction">Client Submits a Transaction</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#assumptions">Assumptions</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#lifecycle-of-the-transaction">Lifecycle of the Transaction</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#accepting-the-transaction">Accepting the Transaction</a></li>
              <li><a href="life-of-a-transaction.htm#sharing-the-transaction-with-other-validators">Sharing the
                  Transaction With Other Validators</a></li>
              <li><a href="life-of-a-transaction.htm#proposing-the-block">Proposing the Block</a></li>
              <li><a href="life-of-a-transaction.htm#executing-the-block-and-reaching-consensus">Executing the Block and
                  Reaching Consensus</a></li>
              <li><a href="life-of-a-transaction.htm#committing-the-block">Committing the Block</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#validator-component-interactions">Validator Component Interactions</a>
          </li>
          <li><a href="life-of-a-transaction.htm#admission-control-ac">Admission Control (AC)</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#client-ac-ac1">Client → AC (AC.1)</a></li>
              <li><a href="life-of-a-transaction.htm#ac-vm-ac2">AC → VM (AC.2)</a></li>
              <li><a href="life-of-a-transaction.htm#ac-mempool-ac3">AC → Mempool (AC.3)</a></li>
              <li><a href="life-of-a-transaction.htm#ac-storage-ac4">AC → Storage (AC.4)</a></li>
              <li><a href="life-of-a-transaction.htm#admission-control-readme">Admission Control README</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#virtual-machine-vm">Virtual Machine (VM)</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#ac-vm-vm1">AC → VM (VM.1)</a></li>
              <li><a href="life-of-a-transaction.htm#vm-storage-vm2">VM → Storage (VM.2)</a></li>
              <li><a href="life-of-a-transaction.htm#execution-vm-vm3">Execution → VM (VM.3)</a></li>
              <li><a href="life-of-a-transaction.htm#mempool-vm-vm4">Mempool → VM (VM.4)</a></li>
              <li><a href="life-of-a-transaction.htm#vm-readme">VM README</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#mempool">Mempool</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#ac-mempool-mp1">AC → Mempool (MP.1)</a></li>
              <li><a href="life-of-a-transaction.htm#mempool-other-validators-mp2">Mempool → Other Validators (MP.2)</a>
              </li>
              <li><a href="life-of-a-transaction.htm#consensus-mempool-mp3">Consensus → Mempool (MP.3)</a></li>
              <li><a href="life-of-a-transaction.htm#mempool-vm-mp4">Mempool → VM (MP.4)</a></li>
              <li><a href="life-of-a-transaction.htm#mempool-readme">Mempool README</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#consensus">Consensus</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#consensus-mempool-co1">Consensus → Mempool (CO.1)</a></li>
              <li><a href="life-of-a-transaction.htm#consensus-other-validators-co2">Consensus → Other Validators
                  (CO.2)</a></li>
              <li><a href="life-of-a-transaction.htm#consensus-execution-consensus-other-validators-co3">Consensus →
                  Execution, Consensus → Other Validators (CO.3)</a></li>
              <li><a href="life-of-a-transaction.htm#consensus-execution-co4">Consensus → Execution (CO.4)</a></li>
              <li><a href="life-of-a-transaction.htm#consensus-readme">Consensus README</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#execution">Execution</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#consensus-execution-ex1">Consensus → Execution (EX.1)</a></li>
              <li><a href="life-of-a-transaction.htm#execution-vm-ex2">Execution → VM (EX.2)</a></li>
              <li><a href="life-of-a-transaction.htm#consensus-execution-ex3">Consensus → Execution (EX.3)</a></li>
              <li><a href="life-of-a-transaction.htm#execution-storage-ex4">Execution → Storage (EX.4)</a></li>
              <li><a href="life-of-a-transaction.htm#execution-readme">Execution README</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#storage">Storage</a>
            <ul class="toc-headings">
              <li><a href="life-of-a-transaction.htm#vm-storage-st1">VM → Storage (ST.1)</a></li>
              <li><a href="life-of-a-transaction.htm#execution-storage-st2">Execution → Storage (ST.2)</a></li>
              <li><a href="life-of-a-transaction.htm#execution-storage-st3">Execution → Storage (ST.3)</a></li>
              <li><a href="life-of-a-transaction.htm#ac-storage-st4">AC → Storage (ST.4)</a></li>
              <li><a href="life-of-a-transaction.htm#storage-readme">Storage README</a></li>
            </ul>
          </li>
          <li><a href="life-of-a-transaction.htm#reference">Reference</a></li>
        </ul>
      </nav>
    </div>
    <footer class="nav-footer" id="footer">
        <section class="sitemap"><a href="https://developers.libra.org/" class="nav-home"><img
              src="libra-logomark-white.png" alt="Libra" /></a>
          <div class="footerSection">
            <h5>Learn About Libra</h5><a href="welcome-to-libra.htm">Welcome to Libra</a><a
              href="libra-protocol.htm">Libra Protocol</a><a href="the-libra-blockchain-paper.htm">Libra Blockchain</a><a
              href="life-of-a-transaction.htm">Life of a Transaction</a>
            <p></p>
            <h5>Try Libra Core </h5><a href="my-first-transaction.htm">My First Transaction</a><a
              href="move-overview.htm">Getting Started With Move</a>
          </div>
          <div class="footerSection">
            <h5>Policies</h5><a href="privacy-policy.htm">Privacy Policy</a><a href="terms-of-use.htm">Terms of Use</a><a
              href="cookies-policy.htm">Cookies Policy</a><a href="code-of-conduct.htm">Code of Conduct</a>
            <p></p>
            <h5>Community</h5><a href="https://community.libra.org/">Developer Forum</a><a
              href="https://developers.libra.org/newsletter_form">Newsletter</a>
          </div>
          <div class="footerSection">
            <h5>Libra Developer Community</h5>
            <img style="width:300px" src='qr_violas.png'>
            <h5>Join us with scan and enter libra<h5>
          </div>
        </section>
        <section class="copyright"> © Violas Association</section>
      </footer>
  </div>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
  <script>
    document.addEventListener('keyup', function (e) {
      if (e.target !== document.body) {
        return;
      }
      // keyCode for '/' (slash)
      if (e.keyCode === 191) {
        const search = document.getElementById('search_input_react');
        search && search.focus();
      }
    });
  </script>
  <script>
    var search = docsearch({

      apiKey: '0d48ee629d39ddc4916eeef7755a0c4c',
      indexName: 'libra',
      inputSelector: '#search_input_react'
    });
  </script>
</body>

</html>